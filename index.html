<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>Weight Tracker</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  </head>

  <body>
    <div class="bg"></div>

    <div class="container">
      <header class="header">
        <div>
          <h1 id="appTitle">Weight Tracker</h1>
          <p id="appSub" class="sub">
            Log daily weight, see trend + weekly averages.
          </p>
        </div>

        <div class="headerRight">
          <!-- simple top nav (only visible when authed) -->
          <div
            id="pageNav"
            class="pageNav hidden"
            role="tablist"
            aria-label="Pages"
          >
            <button
              class="pageBtn active"
              data-page="weight"
              role="tab"
              aria-selected="true"
            >
              Weight
            </button>
            <button
              class="pageBtn"
              data-page="lifts"
              role="tab"
              aria-selected="false"
            >
              Lifts
            </button>
          </div>

          <button id="logoutBtn" class="btn ghost hidden" type="button">
            Logout
          </button>
        </div>
      </header>

      <div id="banner" class="banner hidden">
        <span id="bannerText"></span>
        <button id="bannerClose" aria-label="Close">&times;</button>
      </div>

      <!-- AUTH -->
      <section id="authCard" class="card authCard">
        <div class="authHeader">
          <h2 id="authTitle">Sign in</h2>
          <p id="authSubtitle" class="muted">
            Welcome back. Log in to see your trend.
          </p>
        </div>

        <div class="authStack">
          <div>
            <label>Email</label>
            <input
              id="email"
              type="email"
              placeholder="you@email.com"
              autocomplete="email"
            />
          </div>

          <div>
            <label>Password</label>
            <input
              id="password"
              type="password"
              placeholder="Password"
              autocomplete="current-password"
            />
          </div>

          <div id="confirmWrap" class="hidden">
            <div>
              <label>Confirm password</label>
              <input
                id="password2"
                type="password"
                placeholder="Re-enter password"
                autocomplete="new-password"
              />
            </div>
          </div>
        </div>

        <div class="row">
          <button id="primaryAuthBtn" class="btn primary" type="button">
            Login
          </button>
          <button id="toggleAuthBtn" class="btn ghost" type="button">
            Sign up instead
          </button>
        </div>

        <p id="authHint" class="muted small" style="margin: 10px 0 0">
          New here? Create an account in 10 seconds.
        </p>
      </section>

      <!-- APP WRAPPER -->
      <section id="app" class="hidden">
        <!-- ===================== WEIGHT PAGE ===================== -->
        <section id="weightPage">
          <!-- INPUT -->
          <section class="card" id="logCard">
            <div class="card-title">
              <h2>Log weight</h2>
              <span id="selectedDateText" class="muted"></span>
            </div>

            <div class="grid2">
              <div>
                <label>Date</label>
                <input id="dateInput" type="date" />
              </div>

              <div>
                <label>Weight (lbs)</label>
                <input
                  id="weightInput"
                  type="number"
                  step="0.1"
                  placeholder="155.0"
                />
              </div>
            </div>

            <div class="row">
              <button id="saveBtn" class="btn primary" type="button">
                Save
              </button>
              <span class="muted small">Same date updates automatically.</span>
            </div>
          </section>

          <!-- CHART -->
          <section class="card chartCard">
            <div class="trendTop">
              <h2 class="trendTitle">Weight Trend</h2>

              <div class="avgInline">
                <div class="tiny muted">7-day avg</div>
                <div id="avg7Text" class="avgValue mono">—</div>
              </div>
            </div>

            <div class="rangeBar" role="tablist" aria-label="Time range">
              <button
                class="rangeBtn"
                data-range="14d"
                role="tab"
                aria-selected="false"
              >
                2W
              </button>
              <span class="rangeSep"></span>

              <button
                class="rangeBtn active"
                data-range="30d"
                role="tab"
                aria-selected="false"
              >
                1M
              </button>
              <span class="rangeSep" aria-hidden="true"></span>

              <button
                class="rangeBtn"
                data-range="90d"
                role="tab"
                aria-selected="false"
              >
                3M
              </button>
              <span class="rangeSep" aria-hidden="true"></span>

              <button
                class="rangeBtn"
                data-range="ytd"
                role="tab"
                aria-selected="true"
              >
                YTD
              </button>
              <span class="rangeSep" aria-hidden="true"></span>

              <button
                class="rangeBtn"
                data-range="365d"
                role="tab"
                aria-selected="false"
              >
                1Y
              </button>
              <span class="rangeSep" aria-hidden="true"></span>

              <button
                class="rangeBtn"
                data-range="all"
                role="tab"
                aria-selected="false"
              >
                All
              </button>
            </div>

            <div class="chartWrap">
              <canvas id="chart"></canvas>
            </div>
          </section>

          <!-- TABLES -->
          <section class="card">
            <div class="tabs">
              <button class="tab active" data-tab="entries">Entries</button>
              <button class="tab" data-tab="weekly">Weekly</button>
            </div>

            <div id="entriesTab">
              <div class="tableWrap">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Date</th>
                      <th>Weight</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody id="entriesBody"></tbody>
                </table>
              </div>
              <p class="muted small">
                Click a row to load it. Delete removes that date.
              </p>
            </div>

            <div id="weeklyTab" class="hidden">
              <div class="tableWrap">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Week of (Mon)</th>
                      <th>Avg</th>
                      <th>#</th>
                    </tr>
                  </thead>
                  <tbody id="weeklyBody"></tbody>
                </table>
              </div>
            </div>
          </section>
        </section>

        <!-- ===================== LIFTS PAGE ===================== -->
        <section id="liftsPage" class="hidden">
          <!-- LOG LIFT -->
          <section class="card">
            <div class="card-title">
              <h2>Log lift</h2>
              <span id="liftSelectedDateText" class="muted"></span>
            </div>

            <div class="grid2">
              <div>
                <label>Date</label>
                <input id="liftDateInput" type="date" />
              </div>

              <div>
                <label>Exercise</label>
                <div class="selectRow">
                  <select id="exerciseSelect" class="select">
                    <option value="" selected disabled>Select exercise…</option>
                  </select>
                  <button
                    id="addExerciseBtn"
                    class="btn ghost smallBtn"
                    type="button"
                  >
                    + Add
                  </button>

                  <button
                    id="manageExercisesBtn"
                    class="iconBtn"
                    type="button"
                    aria-label="Manage exercises"
                  >
                    ⚙️
                  </button>
                </div>
              </div>
            </div>

            <div class="grid2">
              <div>
                <label>Weight (lbs)</label>
                <input
                  id="liftWeightInput"
                  type="number"
                  step="0.5"
                  placeholder="135"
                />
              </div>

              <div class="grid2 innerGrid">
                <div>
                  <label>Reps <span class="muted">(optional)</span></label>
                  <input
                    id="liftRepsInput"
                    type="number"
                    step="1"
                    placeholder="6"
                  />
                </div>
                <div>
                  <label>Sets <span class="muted">(optional)</span></label>
                  <input
                    id="liftSetsInput"
                    type="number"
                    step="1"
                    placeholder="3"
                  />
                </div>
              </div>
            </div>

            <div>
              <label>Notes (optional)</label>
              <input
                id="liftNotesInput"
                type="text"
                placeholder="pause reps, incline, felt heavy…"
              />
            </div>

            <div class="row">
              <button id="liftSaveBtn" class="btn primary" type="button">
                Save
              </button>
              <span class="muted small"
                >Same date + exercise updates automatically.</span
              >
            </div>
          </section>

          <!-- LIFT TREND -->
          <section class="card chartCard">
            <div class="trendTop">
              <h2 class="trendTitle">Lift Trend</h2>

              <div class="avgInline">
                <div class="tiny muted">Last</div>
                <div id="liftLastText" class="avgValue mono">—</div>
              </div>
            </div>

            <div class="liftControls">
              <div>
                <label>Viewing</label>
                <select id="liftViewExerciseSelect" class="select">
                  <option value="" selected disabled>Select exercise…</option>
                </select>
              </div>
            </div>

            <div class="rangeBar" role="tablist" aria-label="Lift time range">
              <button class="liftRangeBtn rangeBtn active" data-range="90d">
                3M
              </button>
              <span class="rangeSep"></span>

              <button class="liftRangeBtn rangeBtn" data-range="180d">
                6M
              </button>
              <span class="rangeSep"></span>

              <button class="liftRangeBtn rangeBtn" data-range="ytd">
                YTD
              </button>
              <span class="rangeSep"></span>

              <button class="liftRangeBtn rangeBtn" data-range="365d">
                1Y
              </button>
              <span class="rangeSep"></span>

              <button class="liftRangeBtn rangeBtn" data-range="1825d">
                5Y
              </button>
              <span class="rangeSep"></span>

              <button class="liftRangeBtn rangeBtn" data-range="all">
                All
              </button>
            </div>

            <div class="chartWrap">
              <canvas id="liftChart"></canvas>
            </div>
          </section>

          <!-- LIFT ENTRIES -->
          <section class="card">
            <div class="card-title" style="margin-bottom: 8px">
              <h2 style="margin: 0">Entries</h2>
              <select id="liftTableExerciseSelect" class="select compactSelect">
                <option value="" selected disabled>Select exercise…</option>
              </select>
            </div>

            <div class="tableWrap">
              <table class="table">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Weight</th>
                    <th>Reps</th>
                    <th>Sets</th>
                    <th>Notes</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody id="liftEntriesBody"></tbody>
              </table>
            </div>

            <p class="muted small">
              Click a row to load it. Delete removes that entry.
            </p>
          </section>
        </section>
      </section>
    </div>

    <!-- Add Exercise Modal -->
    <div id="exerciseModal" class="modalOverlay hidden" aria-hidden="true">
      <div
        class="modalCard"
        role="dialog"
        aria-modal="true"
        aria-labelledby="exModalTitle"
      >
        <div class="modalTop">
          <h3 id="exModalTitle">Add exercise</h3>
          <button id="exModalClose" class="iconBtn" aria-label="Close">
            &times;
          </button>
        </div>

        <p class="muted small" style="margin: 0 0 10px">
          Enter a name like <span class="mono">Bench Press</span> or
          <span class="mono">Lat Pulldown</span>.
        </p>

        <input
          id="exModalInput"
          type="text"
          placeholder="Exercise name..."
          autocomplete="off"
        />

        <div class="modalActions">
          <button id="exModalCancel" class="btn ghost" type="button">
            Cancel
          </button>
          <button id="exModalSave" class="btn primary" type="button">
            Add
          </button>
        </div>
      </div>
    </div>

    <!-- keep as module -->
    <script type="module" src="app.js"></script>
  </body>
</html>
