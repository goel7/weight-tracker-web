<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>Weight Tracker</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  </head>

  <body>
    <div class="container">
      <header class="header">
        <div>
          <h1>Weight Tracker</h1>
          <p class="sub">Log daily weight, see trend + weekly averages.</p>
        </div>
        <button id="logoutBtn" class="btn ghost hidden">Logout</button>
      </header>

      <div id="banner" class="banner hidden">
        <span id="bannerText"></span>
        <button id="bannerClose" aria-label="Close">&times;</button>
      </div>

      <!-- AUTH -->
      <section id="authCard" class="card authCard">
        <div class="authHeader">
          <h2 id="authTitle">Sign in</h2>
          <p id="authSubtitle" class="muted">
            Welcome back. Log in to see your trend.
          </p>
        </div>

        <div class="authStack">
          <div>
            <label>Email</label>
            <input
              id="email"
              type="email"
              placeholder="you@email.com"
              autocomplete="email"
            />
          </div>

          <div>
            <label>Password</label>
            <input
              id="password"
              type="password"
              placeholder="Password"
              autocomplete="current-password"
            />
          </div>

          <!-- Only shown in signup mode (JS toggles #confirmWrap) -->
          <div id="confirmWrap" class="hidden">
            <div>
              <label>Confirm password</label>
              <input
                id="password2"
                type="password"
                placeholder="Re-enter password"
                autocomplete="new-password"
              />
            </div>
          </div>
        </div>

        <div class="row">
          <button id="primaryAuthBtn" class="btn primary">Login</button>
          <button id="toggleAuthBtn" class="btn ghost">Sign up instead</button>
        </div>

        <p id="authHint" class="muted small" style="margin: 10px 0 0">
          New here? Create an account in 10 seconds.
        </p>
      </section>

      <!-- APP -->
      <section id="app" class="hidden">
        <!-- INPUT -->
        <section class="card">
          <div class="card-title">
            <h2>Log weight</h2>
            <span id="selectedDateText" class="muted"></span>
          </div>

          <div class="grid2">
            <div>
              <label>Date</label>
              <input id="dateInput" type="date" />
            </div>

            <div>
              <label>Weight (lbs)</label>
              <input
                id="weightInput"
                type="number"
                step="0.1"
                placeholder="155.0"
              />
            </div>
          </div>

          <div class="row">
            <button id="saveBtn" class="btn primary">Save</button>
            <span class="muted small">Same date updates automatically.</span>
          </div>
        </section>

        <!-- CHART -->
        <section class="card">
          <div class="card-title">
            <h2>Trend</h2>
            <div class="right">
              <div class="tiny muted">7-day avg</div>
              <div id="avg7Text" class="big mono">â€”</div>
            </div>
          </div>
          <div class="chartWrap">
            <canvas id="chart"></canvas>
          </div>
        </section>

        <!-- TABLES -->
        <section class="card">
          <div class="tabs">
            <button class="tab active" data-tab="entries">Entries</button>
            <button class="tab" data-tab="weekly">Weekly</button>
          </div>

          <div id="entriesTab">
            <div class="tableWrap">
              <table class="table">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Weight</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody id="entriesBody"></tbody>
              </table>
            </div>
            <p class="muted small">
              Click a row to load it. Delete removes that date.
            </p>
          </div>

          <div id="weeklyTab" class="hidden">
            <div class="tableWrap">
              <table class="table">
                <thead>
                  <tr>
                    <th>Week of (Mon)</th>
                    <th>Avg</th>
                    <th>#</th>
                  </tr>
                </thead>
                <tbody id="weeklyBody"></tbody>
              </table>
            </div>
          </div>
        </section>
      </section>
    </div>

    <script type="module" src="app.js"></script>
  </body>
</html>
